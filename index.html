<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2021-01-29 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20210129" />
    <meta http-equiv="Content-Language" content="en" />
    <title>OGC Web Service Security Client (OGC-17-007) Conformance Test Suite &#x2013; Test suite: ets-security-client10</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://cite.opengeospatial.org/" id="bannerLeft">
                                                                                                <img src="./img/ogc-logo.png"  alt="OGC Web Service Security Client (OGC-17-007) Conformance Test Suite"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2021-01-29
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.6
                      </li>
                      
              
      
                                    
    <li class="pull-right">
                      <a href="https://github.com/opengeospatial/ets-security-client10/issues" class="externalLink" title="Issues">
        Issues</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Getting Started</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>Overview</a>
          </li>
                
      <li>
  
                          <a href="client_setup.html" title="Client Setup">
          <span class="none"></span>
        Client Setup</a>
            </li>
                
      <li>
  
                          <a href="saml2.html" title="SAML2 Testing">
          <span class="none"></span>
        SAML2 Testing</a>
            </li>
                
      <li>
  
                          <a href="test_suite.html" title="Test Suite">
          <span class="none"></span>
        Test Suite</a>
            </li>
                
      <li>
  
                          <a href="team_setup.html" title="TEAM Engine Setup">
          <span class="none"></span>
        TEAM Engine Setup</a>
            </li>
                
      <li>
  
                          <a href="ca_cert_setup.html" title="CA Cert Setup">
          <span class="none"></span>
        CA Cert Setup</a>
            </li>
                
      <li>
  
                          <a href="changelog.html" title="Release Notes">
          <span class="none"></span>
        Release Notes</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                  
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                  
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Test suite: ets-security-client10</h1>
<div class="section">
<h2><a name="Scope"></a>Scope</h2>
<p>This executable test suite (ETS) verifies the conformance of the secure client behavior as the implementation under test (IUT) with respect to the following specification(s):</p>

<ul>
  
<li><i>OGC Web Service Security 1.0</i> (<a class="externalLink" href="https://portal.opengeospatial.org/files/?artifact_id=79178&amp;version=1" title="Download PDF of OGC Web Services Security Standard, version 1.0">OGC-17-007</a>)</li>
</ul>
<p>Conformance testing is a kind of &#x201c;black box&#x201d; testing that examines the externally visible characteristics or behaviors of the IUT while disregarding any implementation details.</p>
<p>Several conformance classes are defined in the principal specification; the ones listed below are covered by this test suite:</p>

<ul>
  
<li>Conformance Class &#x201c;Common Security&#x201d; (abstract)
  
<ul>
    
<li>Validation of secure client HTTPS usage</li>
  </ul></li>
  
<li>Conformance Class &#x201c;OWS Common&#x201d;
  
<ul>
    
<li>Only affects Capabilities document presented to secure client</li>
  </ul></li>
  
<li>Conformance Class &#x201c;WMS 1.1.1&#x201d;
  
<ul>
    
<li>Only affects Capabilities document presented to secure client</li>
  </ul></li>
  
<li>Conformance Class &#x201c;WMS 1.3.0&#x201d;
  
<ul>
    
<li>Only affects Capabilities document presented to secure client</li>
  </ul></li>
</ul></div>
<div class="section">
<h2><a name="Test_suite_structure"></a>Test suite structure</h2>
<p>The test suite definition file (testng.xml) is located in the root package, <tt>org.opengis.cite.securityclient10</tt>. A conformance class corresponds to a &lt;test&gt; element, each of which includes a set of test classes that contain the actual test methods. The general structure of the test suite is shown in Table 1.</p>

<table border="0" class="table table-striped"><caption>Table 1 - Test suite structure</caption>
  
  <thead>
    
<tr class="a" style="text-align: left; background-color: LightCyan">
      
<th>Conformance class</th>
      
<th>Test classes</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>Conformance Level Common Security</td>
      
<td>org.opengis.cite.securityclient10.levelCommonSecurity.*</td>
    </tr>
    
<tr class="a">
      
<td>Conformance Level OWS Common</td>
      
<td>org.opengis.cite.securityclient10.levelOwsCommon.*</td>
    </tr>
    
<tr class="b">
      
<td>Conformance Level WMS 1.1.1</td>
      
<td>org.opengis.cite.securityclient10.levelWms111.*</td>
    </tr>
    
<tr class="a">
      
<td>Conformance Level WMS 1.3.0</td>
      
<td>org.opengis.cite.securityclient10.levelWms13.*</td>
    </tr>
  </tbody>
</table>
<p>The Javadoc documentation provides more detailed information about the test methods that constitute the suite.</p></div>
<div class="section">
<h2><a name="Test_run_arguments"></a>Test run arguments</h2>
<p>The test run arguments are summarized in Table 2. The <i>Obligation</i> descriptor can have the following values: M (mandatory), O (optional), or C (conditional).</p>

<table border="0" class="table table-striped"><caption>Table 2 - Test run arguments</caption>
	
	<thead>
    
<tr class="a">
      
<th>Name</th>
      
<th>Value domain</th>
	    
<th>Obligation</th>
	    
<th>Description</th>
    </tr>
  </thead>
	<tbody>
    
<tr class="b">
      
<td>service_type</td>
      
<td>String</td>
      
<td>M</td>
      
<td>
        
<p>A string representing the service type to emulate for secure 
      clients. Will affect the query parameters required to get 
      capabilities. Valid values are:</p>
        
<ul>
          
<li><tt>wms111</tt> for WMS 1.1.1 Conformance Class</li>
          
<li><tt>wms13</tt> for WMS 1.3.0 Conformance Class</li>
          
<li><tt>wps20</tt> for WPS 2.0.0 on the OWS Common Conformance Class</li>
        </ul>
      </td>
    </tr>
	  
<tr class="a">
      
<td>address</td>
      
<td>String</td>
      
<td>M</td>
      
<td>Host interface on which to bind test server. When using IPv6, do not use square brackets, e.g. <tt>::1</tt></td>
    </tr>
    
<tr class="b">
      
<td>port</td>
      
<td>Integer</td>
      
<td>M</td>
      
<td>Port on which to bind test server.</td>
    </tr>
    
<tr class="a">
      
<td>host</td>
      
<td>String</td>
      
<td>M</td>
      
<td>Host name that will be advertised to clients. May be an IP address or domain name. Clients must be able to resolve this IP or name to the machine running the test server. If you are using a certificate from a Certificate Authority, this parameter must match the common name on that certificate. When using IPv6, use square brackets around the address, e.g. <tt>[::1]</tt></td>
    </tr>
    
<tr class="b">
      
<td>path</td>
      
<td>String</td>
      
<td>O</td>
      
<td>
        
<p>URL Path at which the Test Server will listen. For example,
      <tt>test-session</tt> would result in the Test Server creating 
      a servlet for <tt>https://host:port/test-session</tt>.</p>
      
<p>If left blank, a random string will be generated.</p>
      
<p>When used with TEAM Engine, the CTL script will automatically
        fill in a path such that the test session web page can inform
        the tester of the URL <i>before</i> starting the test session.
      </p>
      </td>
    </tr>
    
<tr class="a">
      
<td>jks_path</td>
      
<td>String</td>
      
<td>M</td>
      
<td>A Java KeyStore containing the X.509 certificates for the host address
      must be located at jks_path in order for the embedded Jetty server to
      provide HTTPS. Self-signed certificates are permitted, although the test
      client will have to trust that certificate manually.</td>
    </tr>
    
<tr class="b">
      
<td>jks_password</td>
      
<td>String</td>
      
<td>M</td>
      
<td>The password required to unlock the Java KeyStore. Using a CDATA section
      is recommended to wrap passwords that have character data that may
      interfere with XML character entities.</td>
    </tr>
    
<tr class="a">
      
<td>authentication</td>
      
<td>String</td>
      
<td>O</td>
      
<td>
        
<p>Specify the authentication method that will be presented to
        Secure Clients via the capabilities document. Only one authentication
        method may be specified. Values are <b>not</b> case
        sensitive.</p>
        
<p>Enabling this will include an <tt>ows:Constraint</tt> for 
        requiring an authentication from the secure client. For some
        authentication methods, additional test run properties may be
        mandatory.</p>
        
<p>If this element is omitted or is empty, then authentication 
        will not be enabled.</p>
        
<p>For SAML2 authentication, specify <tt>saml2</tt> and specify
          the <tt>idp_url</tt> test run property:</p>
          
<div>
<pre>&lt;entry name=&quot;authentication&quot;&gt;saml2&lt;/entry&gt;</pre></div>
      </td>
    </tr>
    
<tr class="b">
      
<td>idp_url</td>
      
<td>String</td>
      
<td>O</td>
      
<td>
        
<p>As part of the annotated capabilities document presented to 
        the secure client, include Requirements Class &quot;SAML2&quot; 
        (https://www.opengis.net/def/security/1.0/rc/authentication/saml2).</p>
        
<p>Enabling this will include an <tt>ows:Constraint</tt> for 
        requiring SAML2 authentication from the secure client. The
        <tt>authentication</tt> test run property must be set to
        <tt>saml2</tt>, otherwise this test run property is ignored.</p>
        
<p>The value must be a URL that resolves to a SAML2 SSO resource. This value will then be passed to the 
        secure client in the <tt>ows:Constraint</tt>. Note that it 
        is up to the test user to validate the URL and the service at 
        that URL, the ETS will do no verification and pass the URL 
        &quot;as-is&quot; to the secure client in the capabilities document.</p>
        
<p>If this element is omitted or is empty, then SAML2 
        authentication will not be enabled.</p>
        
<p><a href="saml2.html">A guide has been included for running 
        SAML2 tests</a>.</p>
      </td>
    </tr>
    
<tr class="a">
      
<td>http_methods</td>
      
<td>String</td>
      
<td>O</td>
      
<td>
        
<p>As part of the annotated capabilities document presented to the secure client, include Requirements Class &quot;HTTP Methods&quot; 
        (https://www.opengis.net/def/security/1.0/rc/http-methods).</p>
        
<p>Enabling this will include an <tt>ows:Constraint</tt> for listing all supported  HTTP methods.</p>
        
<p>Only a value of <tt>true</tt> will enable this property, any other value will be evaluated as <tt>false</tt>.</p>
        
<p>If the <tt>w3c_cors</tt> property is set to <tt>true</tt>, then this property will be overridden to <tt>true</tt> as well.</p>
      </td>
    </tr>
    
<tr class="b">
      
<td>w3c_cors</td>
      
<td>String</td>
      
<td>O</td>
      
<td>
        
<p>As part of the annotated capabilities document presented to the secure client, include Requirements Class &quot;W3C CORS&quot; (https://www.opengis.net/def/security/1.0/rc/cors).</p>
        
<p>Enabling this will include an <tt>ows:Constraint</tt> for the W3C recommendation&quot;Cross Origin Resource Sharing&quot;.</p>
        
<p>Only a value of <tt>true</tt> will enable this property, any other value will be evaluated as <tt>false</tt>.</p>
        
<p>If set to <tt>true</tt>, then the <tt>http_methods</tt> test run property will also be set to <tt>true</tt> regardless of your configuration; &quot;HTTP Methods&quot; is required for this Requirements Class.</p>
      </td>
    </tr>
    
<tr class="a">
      
<td>http_exception_handling</td>
      
<td>String</td>
      
<td>O</td>
      
<td>
        
<p>As part of the annotated capabilities document presented to the secure client, include Requirements Class &quot;HTTP Exception Handling&quot; (https://www.opengis.net/def/security/1.0/rc/http-exception-handling).</p>
        
<p>Enabling this will include an <tt>ows:Constraint</tt> for enabling HTTP error code mapping to OWS Common exception codes.</p>
        
<p>Only a value of <tt>true</tt> will enable this property, any other value will be evaluated as <tt>false</tt>.</p>
      </td>
    </tr>
    
<tr class="b">
      
<td>http_post_content_type</td>
      
<td>String</td>
      
<td>O</td>
      
<td>
        
<p>As part of the annotated capabilities document presented to the secure client, include Requirements Class &quot;HTTP POST Content-Type&quot; (https://www.opengis.net/def/security/1.0/rc/content-type).</p>
        
<p>Enabling this will include an <tt>ows:Constraint</tt> for listing the mime-types permitted to be submitted by HTTP POST. At the minimum, the `application/x-www-form-urlencoded` MIME type must (and will) be supported and advertised by the service.</p>
        
<p>Only a value of <tt>true</tt> will enable this property, any other value will be evaluated as <tt>false</tt>.</p>
      </td>
    </tr>
	</tbody>
</table>
<p>Additional test run properties may be added in the future to support other authentication methods such as SAML 2.0 and OpenID Connect.</p></div>
<div class="section">
<h2><a name="How_to_run_the_tests"></a>How to run the tests</h2>
<p>The test suite is built using <a class="externalLink" href="https://maven.apache.org/">Apache Maven v3</a>. Maven is necessary for self-hosting the test suite in your own test environment.</p>
<p>The test suite can be ran in the following environments:</p>

<ul>
  
<li>Under an IDE such as Eclipse</li>
  
<li>As a self-contained JAR command-line application</li>
  
<li>As a module under TEAM Engine</li>
</ul>
<div class="section">
<h3><a name="a1._Integrated_development_environment_IDE"></a>1. Integrated development environment (IDE)</h3>
<p>Use a Java IDE such as Eclipse, NetBeans, or IntelliJ. Clone the repository and build the project.</p>
<p>Set the main class to run: <tt>org.opengis.cite.security-client10.TestNGController</tt></p>
<p>Arguments: The first argument must refer to an XML properties file containing the required test run arguments. If not specified, the default location at <tt>${user.home}/test-run-props.xml</tt> will be used.</p>
<p>The TestNG results file (<tt>testng-results.xml</tt>) will be written to a subdirectory in <tt>${user.home}/testng/</tt> having a UUID value as its name.</p></div>
<div class="section">
<h3><a name="a2._Command_shell_console"></a>2. Command shell (console)</h3>
<p>One of the build artifacts is an &#x201c;all-in-one&#x201d; JAR file that includes the test suite and all of its dependencies; this makes it very easy to execute the test suite in a command shell:</p>
<p><tt>java -jar ets-security-client10-0.1-SNAPSHOT-aio.jar [-o|--outputDir $TMPDIR] [test-run-props.xml]</tt></p>
<p>This will require you to first compile and build the test suite as a Java application.</p></div>
<div class="section">
<h3><a name="a3._OGC_test_harness"></a>3. OGC test harness</h3>
<p>Use <a class="externalLink" href="https://github.com/opengeospatial/teamengine">TEAM Engine</a>, the official OGC test harness. The latest test suite release are usually available at the <a class="externalLink" href="http://cite.opengeospatial.org/te2/">beta testing facility</a>. You can also <a class="externalLink" href="https://github.com/opengeospatial/teamengine">build and deploy</a> the test harness yourself and use a local installation.</p>
<p>For more details, please see the guide on <a href="team_setup.html">setting up TEAM Engine</a> with this ETS.</p></div></div>
<div class="section">
<h2><a name="Debugging_the_ETS"></a>Debugging the ETS</h2>
<p>If you need to debug a secure client connection and inspect the HTTP or HTTPS details, add these to your Java VM arguments:</p>

<div class="source">
<div class="source"><pre class="prettyprint">-DDEBUG=true -Dorg.eclipse.jetty.LEVEL=DEBUG -Djavax.net.debug=ssl,handshake,data
</pre></div></div>
<p>This will print very detailed information about cipher suites and any TLS extensions available from the client.</p></div>
<div class="section">
<h2><a name="About_the_included_sample_Java_KeyStore"></a>About the included sample Java KeyStore</h2>
<p>This repository contains a sample Java KeyStore with a self-signed certificate for testing purposes. The keystore can be created with the following command.</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ keytool -keystore src/main/resources/security.jks -storepass &quot;ets-security-client&quot; -genkey -alias dummy-key -keyalg RSA -sigalg SHA256withRSA -dname &quot;cn=ETS Test Operator, ou=None, o=None, c=us&quot;
</pre></div></div>
<p>This creates <tt>src/main/resources/security.jks</tt> with a single key (<tt>dummy-key</tt>) and protects the file with a password (<tt>ets-security-client</tt>). As this is a self-signed certificate, secure clients must allow insecure server certificates or install the certificate to their keystore.</p>
<p>When running the test suite from an IDE, this KeyStore will be used as it is specified in <tt>src/main/config/test-run-props.xml</tt>.</p>
<p>To create a PEM version of the file for secure clients to use:</p>

<div class="source">
<div class="source"><pre class="prettyprint">$ keytool -exportcert -alias dummy-key -keystore src/main/resources/security.jks -storepass &quot;ets-security-client&quot; -rfc -file src/main/resources/security.pem
</pre></div></div></div>
<div class="section">
<h2><a name="How_to_contribute"></a>How to contribute</h2>
<p>If you would like to get involved, you can:</p>

<ul>
  
<li><a class="externalLink" href="https://github.com/opengeospatial/ets-securityclient10/issues">Report an issue</a> such as a defect or an enhancement request</li>
  
<li>Help to resolve an <a class="externalLink" href="https://github.com/opengeospatial/ets-securityclient10/issues?q=is%3Aopen">open issue</a></li>
  
<li>Fix a bug: Fork the repository, apply the fix, and create a pull request</li>
  
<li>Add new tests: Fork the repository, implement and verify the tests on a new topic branch, and create a pull request (don&#x2019;t forget to periodically rebase long-lived branches so there are no extraneous conflicts)</li>
</ul></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2021
                        <a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>